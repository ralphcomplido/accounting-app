@if(internalApiResponse$ | async; as response) { @if (response.type === "Success") {
<ng-container *ngTemplateOutlet="successTemplateRef()!; context: { $implicit: response.result }" />
} @else {
<ng-container *ngTemplateOutlet="errorTemplateRef() || defaultErrorTemplate; context: { $implicit: response }" />
} } @else {
<ng-container *ngTemplateOutlet="loadingTemplateRef() || defaultLoadingTemplate"> </ng-container>
}

<ng-template #defaultErrorTemplate let-response>
  <p>{{ errorMessage() }}</p>
  <error-list [apiResponse]="response" />
</ng-template>

<ng-template #defaultLoadingTemplate>
  <p-progressSpinner ariaLabel="loading" />
  <p>{{ loadingMessage() }}</p>
</ng-template>
